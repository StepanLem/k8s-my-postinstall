---
- name: ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Kubernetes ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°
  hosts: kubernetes
  gather_facts: yes
  become: no

  tasks:
    - name: Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° nginx-ingress
      include: 00-nginx-ingress/00-install-ingress-nginx.yml

    - name: Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° cert-manager
      include: 01-cert-manager/01-install-cert-manager.yml

    - name: Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° local path provisioner
      include: 03-local-path-provisioner/03-install-local-path-provisioner-manifests.yml

    - name: Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° ArgoCD
      include: 02-argocd/02-install-argocd.yml

    - name: Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
      debug:
        msg: |
          ğŸ‰ Ğ’ÑĞµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾!
          
          ğŸ“‹ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:
          - nginx-ingress (Ğ²Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğ¹ Ñ‚Ñ€Ğ°Ñ„Ğ¸Ğº)
          - cert-manager (ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ TLS ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ°Ğ¼Ğ¸)
          - local-path-provisioner (Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ)
          - ArgoCD (GitOps)
          
          ğŸ”— Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ArgoCD:
          - HTTPS: ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ñ‚Ğµ Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ "Ğ’Ñ‹Ğ²Ğ¾Ğ´ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğµ Ğº ArgoCD" Ğ²Ñ‹ÑˆĞµ
            (Ğ´Ğ¾Ğ¼ĞµĞ½ Ğ±ĞµÑ€Ñ‘Ñ‚ÑÑ Ğ¸Ğ· 02-argocd/argocd-values.yaml -> global.domain)
          
          ğŸŒ Ingress Controller:
          - IngressClass: nginx
          - Namespace: ingress-nginx
